<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<link th:href="@{/css/main.css}" rel="stylesheet"></link>
<link th:href="@{/jquery-easyui-1.5.3/themes/material/easyui.css}"
	rel="stylesheet"></link>
<link th:href="@{/jquery-easyui-1.5.3/themes/icon.css}" rel="stylesheet"></link>

<script th:src="@{/jquery-easyui-1.5.3/jquery.min.js}"
	type="text/javascript"></script>
<script th:src="@{/jquery-easyui-1.5.3/jquery.easyui.min.js}"
	type="text/javascript"></script>
<script th:src="@{/jquery-easyui-1.5.3/locale/easyui-lang-zh_CN.js}"
	type="text/javascript"></script>
<script th:src="@{/js/main.js}" type="text/javascript"></script>
</head>
<body>
	<div class="easyui-layout" data-options="fit:true">
		<div id="rolePermissionsPanel"
			data-options="region:'east',border:false,collapsible:false,tools:'#tt'"
			title="角色权限" style="width: 240px">
			<ul id="rolePermissionTree" class="easyui-tree"></ul>
		</div>
		<div id="tt">
            <a href="javascript:void(0)" class="icon-edit" onclick="showRolesPermissionDialog()" title="修改权限"></a>
        </div>
		<div data-options="region:'center',border:false">
			<!-- 数据表格 -->
			<table id="roleDatagrid" class="easyui-datagrid"
				toolbar="#roleDatagridToolbar">
				<thead>
					<tr>
						<th data-options="field:'ck',checkbox:true"></th>
						<th field="roleName" style="width: 160px">角色名称</th>
						<th field="roleDescription" style="width: 200px">角色描述</th>
						<th field="available" style="width: 60px" align="center"
							formatter="availableFormatter">启用</th>
						<th field="createdTime" style="width: 120px"
							formatter="dateTimeFormatter">创建时间</th>
						<th field="updateTime" style="width: 120px"
							formatter="dateTimeFormatter">更新时间</th>
					</tr>
				</thead>
			</table>

			<!-- 数据表格工具栏 -->
			<div id="roleDatagridToolbar" class="datagrid-toolbar">
				<shiro:hasPermission name="authRole:new">
					<a href="javascript:void(0)" class="easyui-linkbutton"
						iconCls="icon-add" plain="true" onclick="newRole()">新增</a>
				</shiro:hasPermission>
				<shiro:hasPermission name="authRole:edit">
					<a href="javascript:void(0)" class="easyui-linkbutton"
						iconCls="icon-edit" plain="true" onclick="editRole()">修改</a>
				</shiro:hasPermission>
				<shiro:hasPermission name="authRole:delete">
					<a href="javascript:void(0)" class="easyui-linkbutton"
						iconCls="icon-remove" plain="true" onclick="deleteRole()">删除</a>
				</shiro:hasPermission>
				<input id="roleName" prompt="请输入角色名称" class="easyui-searchbox" />
			</div>
		</div>
	</div>

	<!-- 新增、编辑窗体 -->
	<div id="roleEditDlg" class="easyui-dialog"
		style="width: 400px; height: auto" closed="true"
		buttons="#roleEditDlgButtons" data-options="modal:true">
		<form id="roleEditForm" method="post">
			<div>
				<input name="roleName" class="easyui-textbox" required="true"
					style="width: 100%; height: 34px;" validType="length[4,64]"
					label="角色名称" lableWidth="60px" />
			</div>
			<div>
				<input name="roleDescription" class="easyui-textbox" required="true"
					style="width: 100%; height: 34px;" validType="length[0,128]"
					label="角色描述" lableWidth="60px" />
			</div>
			<div style="text-align: right">
				<input class="easyui-switchbutton" name="available"
					data-options="onText:'启用',offText:'禁用'" checked="true" />
			</div>
		</form>
	</div>
	<!-- 新增、编辑窗体按钮 -->
	<div id="roleEditDlgButtons">
		<a href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-ok" onclick="saveRole()">保存且关闭</a> <a
			href="javascript:void(0)" class="easyui-linkbutton"
			iconCls="icon-cancel"
			onclick="javascript:$('#roleEditDlg').dialog('close')">取消</a>
	</div>
	
	<!-- 角色权限编辑窗体 -->
    <div id="rolePermissionDlg" class="easyui-dialog" title="权限分配"
        style="width: 400px; height: 500px;" closed="true" buttons="#rolePermissionDlgButtons" data-options="modal:true">
        <ul id="permissionTree" class="easyui-tree"></ul>
    </div>

    <!-- 角色权限窗体按钮 -->
    <div id="rolePermissionDlgButtons">
        <a href="javascript:void(0)" class="easyui-linkbutton"
            iconCls="icon-ok" onclick="saveRolePermissions()">保存且关闭</a> <a
            href="javascript:void(0)" class="easyui-linkbutton"
            iconCls="icon-cancel" onclick="closeRolesPermissionDialog()">取消</a>
    </div>

	<script th:src="@{/js/role.js}" type="text/javascript"></script>
</body>
</html>
