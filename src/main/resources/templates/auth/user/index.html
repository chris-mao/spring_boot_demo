<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:shiro="http://www.pollix.at/thymeleaf/shiro"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="layout/default">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>系统用户列表</title>
</head>
<body>
	<div layout:fragment="content">
		<script th:src="@{/js/main.js}" type="text/javascript"></script>
		<table class="easyui-datagrid" title="系统用户" rownnumbers="true"
			pagination="true" singleSelect="true" collapsible="true"
			url="users/json" method="get" toolbar="#tb" style="height: 800px;">
			<thead>
				<tr>
					<th data-options="field:'ck',checkbox:true"></th>
					<th data-options="field:'userName',width:160">登录名称</th>
					<th data-options="field:'nickName',width:260">显示昵称</th>
					<th data-options="field:'email',width:200">电子邮件</th>
					<th data-options="field:'state',width:80,align:'center'">状态</th>
					<th data-options="field:'createdTime',width:100"
						formmater="DateTimeFormatter">创建时间</th>
					<th data-options="field:'updateTime',width:100">更新时间</th>
				</tr>
			</thead>
		</table>

		<div id="tb" style="padding: 5px; height: auto">
			<div style="margin-bottom: 5px">
				<a href="#" class="easyui-linkbutton" iconCls="icon-add"
					plain="true"></a> <a href="#" class="easyui-linkbutton"
					iconCls="icon-edit" plain="true"></a> <a href="#"
					class="easyui-linkbutton" iconCls="icon-save" plain="true"></a> <a
					href="#" class="easyui-linkbutton" iconCls="icon-cut" plain="true"></a>
				<a href="#" class="easyui-linkbutton" iconCls="icon-remove"
					plain="true"></a>
			</div>
			<div>
				Date From: <input class="easyui-datebox" style="width: 80px" /> To:
				<input class="easyui-datebox" style="width: 80px" /> Language: <select
					class="easyui-combobox" panelHeight="auto" style="width: 100px">
					<option value="java">Java</option>
					<option value="c">C</option>
					<option value="basic">Basic</option>
					<option value="perl">Perl</option>
					<option value="python">Python</option>
				</select> <a href="#" class="easyui-linkbutton" iconCls="icon-search">Search</a>
			</div>
		</div>
	</div>

	<div class="table-responsive" th:fragment="showUsers(userList)">
		<table class="table table-striped table-hover table-condensed">
			<thead>
				<tr>
					<th>登录名称</th>
					<th>显示昵称</th>
					<th>电子邮件</th>
					<th>状态</th>
					<th>创建时间</th>
					<th>更新时间</th>
					<th></th>
				</tr>
			</thead>
			<tbody>
				<tr data-th-each="user, state: ${userList}" data-th-object="${user}">
					<td><a data-th-href="@{'/users/' + *{userId}}"
						data-th-text="*{userName}"></a></td>
					<td data-th-text="*{nickName}"></td>
					<td><a data-th-text="*{email}"
						th:href="@{'mailto:' + *{email}}"></a></td>
					<td data-th-text="*{state}"></td>
					<td><span th:if="*{createdTime}"
						th:text="*{#dates.format(createdTime, 'yyyy-MM-dd HH:mm:ss')}"></span></td>
					<td><span th:if="*{updateTime}"
						th:text="*{#dates.format(updateTime, 'yyyy-MM-dd HH:mm:ss')}"></span></td>
					<td>
						<div class="btn-toolbar pull-right hidden-print">
							<div class="btn-group btn-group-xs">
								<shiro:hasPermission name="authUser:edit">
									<a class="btn btn-default" title="修改用户资料"
										th:href="@{/users/{id}/edit(id=*{userId})}">编辑</a>
								</shiro:hasPermission>
								<shiro:hasPermission name="authUser:change-password">
									<a class="btn btn-default" title="修改登录密码"
										th:href="@{/users/{id}/change-psd(id=*{userId})}">修改密码</a>
								</shiro:hasPermission>
								<shiro:hasPermission name="authUser:delete">
									<a class="btn btn-danger" title="删除该用户"
										onclick="if(confirm('确定删除?')==false)return false;"
										th:href="@{/users/{id}/del(id=*{userId})}">删除</a>
								</shiro:hasPermission>
							</div>
						</div>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
</html>
